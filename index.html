<html>
<head>
  <title>Test WS</title>
</head>
<body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.js">
  </script>
  <script>
    function createUser() {
      socket.emit(
        'add_profile',
        {
          firstName: getValue('firstname'),
          middleName: getValue('middlename'),
          lastName: getValue('lastname'),
          nickname: getValue('nickname'),
          password: getValue('password'),
          country: getValue('country')
        }
      )
    }

    function updateUser(id) {
      socket.emit(
        'update_profile',
        {
          account: {
            nickname: getValue('nickname'),
            password: getValue('password'),
          },
          update: {
            firstName: getValue('firstname'),
            country: getValue('country'),
            nickname: getValue('newNickname'),
            password: getValue('newPassword'),
            passwordData: {}
          }
        }
      )
    }

    function getValue(id) {
      return document.getElementById(id).value
    }

    function deleteUser(id) {
      console.log(id)
      socket.emit('delete_profile', getValue('profileId'))
    }

    function getUser(id) {
      console.log(id)
      socket.emit('get_profile', { profileId: getValue('profileId') })
    }

    function auth(nickname, password) {
      socket.emit('auth', {
        nickname: getValue('nickname'),
        password: getValue('password')
      })
    }

    const socket = io('http://localhost:8080')
    socket.on('response', data => {
      console.log(data)
      const res = document.getElementById("response")
      res.innerHTML = JSON.stringify(data)
    })
  </script>
  <div>
    <input id="firstname" placeholder="Name" />
    <input id="middlename" placeholder="Middle name" />
    <input id="lastname" placeholder="Surname" />
    <input id="nickname" placeholder="Nickname" />
    <input id="country" placeholder="Country" />
    <input id="password" type="password" placeholder="Password" />
    <br />
    <input id="profileId" placeholder="ID" />
    <br />
    <input id="newNickname" placeholder="New nickname" />
    <input id="newPassword" type="password" placeholder="New password" />
  </div>
  <div>
    <button onclick="createUser()">Create user</button>
    <button onclick="updateUser()">Update user</button>
    <button onclick="getUser()">Get user</button>
    <br />
    <button onclick="deleteUser()">Delete user</button>
    <button onclick="auth()">Auth</button>
  </div>
  <div id="response" />
</body>
</html>
